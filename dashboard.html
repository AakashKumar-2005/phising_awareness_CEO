<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <!-- Google Charts Library -->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>
  <h1>Admin Dashboard</h1>

  <!-- Pie Chart for Email Status -->
  <div id="piechart" style="width: 400px; height: 400px;"></div>

  <script type="text/javascript">
      // Load the Google Charts library
      google.charts.load('current', { packages: ['corechart'] });
      google.charts.setOnLoadCallback(drawChart);

      // Convert Flask data into JavaScript variables
      var labels = {{ pie_data.labels | tojson }};
      var dataCounts = {{ pie_data.data | tojson }};

      function drawChart() {
          // Prepare the data in Google Charts format
          var data = new google.visualization.DataTable();
          data.addColumn('string', 'Status');
          data.addColumn('number', 'Count');
          for (let i = 0; i < labels.length; i++) {
              data.addRow([labels[i], dataCounts[i]]);
          }

          // Chart options
          var options = {
              title: 'Email Status',
              colors: ['#ff0000', '#ffcc00', '#00ff00']
          };

          // Draw the pie chart
          var chart = new google.visualization.PieChart(document.getElementById('piechart'));
          chart.draw(data, options);
      }
  </script>

  <!-- Table to Display Employee Data -->
  <h2>Employee Data</h2>
  <table border="1">
    <thead>
      <tr>
        <th>Email</th>
        <th>Name</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      {% for row in data %}
        <tr>
          <td>{{ row['Email'] }}</td>
          <td>{{ row['Name'] }}</td>
          <td>{{ row['Status'] }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>
